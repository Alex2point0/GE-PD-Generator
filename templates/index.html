{% extends "base.html" %} {% block title %}Index{% endblock %} {% block head %} {{ super() }}

</style>
{% endblock %} {% block content %}
<div id="fullpage">
    <section class="section" id="section1">
        
        <div class="container">
            <div class="navbar background-logo col-md-12 col-md-offset-3">
                <h1>PD Insights Generator</h1>
            </div>
            <div class="row">
                <p>Enter the name</p>
                <input id="inputName" class="form-control" v-model="name"></input>
            </div><br>
            {% for key, value in data.items() %} 
            {%if value.Num|int<3 %} 
            <div class="row">


                <p>{{value.Label}}</p>
                <div id="idd{{value.Num}}">
                    <select v-model="selected" v-on:change="onChange" class="form-control">
                        <option disabled value="">Выберите один из вариантов</option>   
                            {%raw%}
                                <option v-for="option in options" v-bind:value="option.Value">
                                    {{option.Text}}
                                </option>
                            {%endraw%}
                    </select><br>
                </div>



        </div>
        {%endif%} {%endfor%}
        

    </div>
    </section>

    <section class="section" id="section1">
            
            <div class="container">
                {% for key, value in data.items() %} 
                {%if value.Num|int>3 and value.Num|int<9  %} 
                <div class="row">
    
    
                    <p>{{value.Label}}</p>
                    <div id="idd{{value.Num}}">
                        <select v-model="selected" v-on:change="onChange" class="form-control">
                            <option disabled value="">Выберите один из вариантов</option>   
                                {%raw%}
                                    <option v-for="option in options" v-bind:value="option.Value">
                                        {{option.Text}}
                                    </option>
                                {%endraw%}
                        </select><br>
                    </div>
    
    
    
            </div>
            {%endif%} {%endfor%}
            
    
        </div>
        </section>
        <section class="section" id="section1">
                
                <div class="container">
                    {% for key, value in data.items() %} 
                    {%if value.Num|int>8 and value.Num|int<14  %} 
                    <div class="row">
        
        
                        <p>{{value.Label}}</p>
                        <div id="idd{{value.Num}}">
                            <select v-model="selected" v-on:change="onChange" class="form-control">
                                <option disabled value="">Выберите один из вариантов</option>   
                                    {%raw%}
                                        <option v-for="option in options" v-bind:value="option.Value">
                                            {{option.Text}}
                                        </option>
                                    {%endraw%}
                            </select><br>
                        </div>
        
        
        
                </div>
                {%endif%} {%endfor%}
                
        
            </div>
            </section>

        <section class="section" id="section1">
                
                <div class="container">
                    {% for key, value in data.items() %} 
                    {%if value.Num|int>13 %} 
                    <div class="row">
        
        
                        <p>{{value.Label}}</p>
                        <div id="idd{{value.Num}}">
                            <select v-model="selected" v-on:change="onChange" class="form-control">
                                <option disabled value="">Выберите один из вариантов</option>   
                                    {%raw%}
                                        <option v-for="option in options" v-bind:value="option.Value">
                                            {{option.Text}}
                                        </option>
                                    {%endraw%}
                            </select><br>
                        </div>
        
        
        
                </div>
                {%endif%} {%endfor%}
                <div id="finalText"><br><br><br><br>
                    <button v-on:click="show=!show" class="btn-block">Generate</button>
                    <transition name="fade">
                        <p>
                            <textarea v-if="show" class="form-control">{%raw%}{{text}}{%endraw%}</textarea>
                        </p>
                    </transition>
        
            </div>
            </section>
<!-- FOOTER -->
</div>


<!-- SCRIPT SECTION-->
<script>
    function getValuesByOptionChosen(value) {
        return value['Parent'] == Parent;
    }

    function getValuesFromDict(dict) {
        for (keys in dict) {
            var elements = dict[keys];
        }
        return elements;
    }


    var data = JSON.parse('{{ data | tojson }}');

    var inputName=new Vue({
        el: '#inputName',
        data: {
            name: ''
        },
        methods: {
            returnName: function() {
                return this.name;
            }
        }
    })
    
    var list0 = new Vue({
        el: '#idd0',
        data: {
            selected: '',
            options: data["1"].Options,
            name: ''
        },
        methods: {
            onChange: function (event) {
                list1.update(event.srcElement.value);

                finalText.updateText(0, this.options[this.selected]);
            },
        }
    })

    var list1 = new Vue({
        el: '#idd1',
        data: {
            selected: '',
            options: data["2"].Options
        },
        methods: {
            update: function (value) {
                // 
                res = {}
                for (key in data["2"].Options) {
                    if (data["2"].Options[key]['Parent'] == value) {
                        res[key] = data["2"].Options[key];
                    }
                }

                this.options = res;
            },
            onChange: function (event) {
                finalText.updateText(1, this.options[this.selected]);
            }
        }

    })

    var list2 = new Vue({
        el: '#idd2',
        data: {
            selected: '',
            options: data["3"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(2, this.options[this.selected]);
            },
        }
    })

    var list3 = new Vue({
        el: '#idd3',
        data: {
            selected: '',
            options: data["4"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(3, this.options[this.selected]);
                list4.update(event.srcElement.value);
            }
        }

    })

    var list4 = new Vue({
        el: '#idd4',
        data: {
            selected: '',
            options: data["5"].Options
        },
        methods: {
            
            update: function (value) {
                // 
                res = {}
                for (key in data["5"].Options) {
                    if (data["5"].Options[key]['Parent'] == value) {
                        res[key] = data["5"].Options[key];
                    }
                }

                this.options = res;
            },
            onChange: function (event) {
                finalText.updateText(4, this.options[this.selected]);
                list5.update(event.srcElement.value);
            },
        }
    })

    var list5 = new Vue({
        el: '#idd5',
        data: {
            selected: '',
            options: data["6"].Options,
        },
        methods: {
            update: function (value) {
                // 
                res = {}
                for (key in data["6"].Options) {
                    if (data["6"].Options[key]['Parent'] == value) {
                        res[key] = data["6"].Options[key];
                    }
                }

                this.options = res;
            },
            onChange: function (event) {
                list6.update(event.srcElement.value);

                finalText.updateText(5, this.options[this.selected]);
            },
        }
    })

    var list6 = new Vue({
        el: '#idd6',
        data: {
            selected: '',
            options: data["7"].Options
        },
        methods: {
            update: function (value) {
                // 
                res = {}
                for (key in data["7"].Options) {
                    if (data["7"].Options[key]['Parent'] == value) {
                        res[key] = data["7"].Options[key];
                    }
                }

                this.options = res;
            },
            onChange: function (event) {
                finalText.updateText(6, this.options[this.selected]);
                list7.update(event.srcElement.value);
            },
        }
    })

    var list7 = new Vue({
        el: '#idd7',
        data: {
            selected: '',
            options: data["8"].Options
        },
        methods: {
            update: function (value) {
                // 
                res = {}
                for (key in data["8"].Options) {
                    if (data["8"].Options[key]['Parent'] == value) {
                        res[key] = data["8"].Options[key];
                    }
                }

                this.options = res;
            },
            onChange: function (event) {
                finalText.updateText(7, this.options[this.selected]);
                list8.update(event.srcElement.value);
            }
        }

    })

    var list8 = new Vue({
        el: '#idd8',
        data: {
            selected: '',
            options: data["9"].Options
        },
        methods: {
            update: function (value) {
                // 
                res = {}
                for (key in data["9"].Options) {
                    if (data["9"].Options[key]['Parent'] == value) {
                        res[key] = data["9"].Options[key];
                    }
                }

                this.options = res;
            },
            onChange: function (event) {
                finalText.updateText(8, this.options[this.selected]);
                list9.update(event.srcElement.value);
            },
        }
    })

    var list9 = new Vue({
        el: '#idd9',
        data: {
            selected: '',
            options: data["10"].Options
        },
        methods: {
            update: function (value) {
                // 
                res = {}
                for (key in data["10"].Options) {
                    if (data["10"].Options[key]['Parent'] == value) {
                        res[key] = data["10"].Options[key];
                    }
                }

                this.options = res;
            },
            onChange: function (event) {
                finalText.updateText(9, this.options[this.selected]);
            }
        }

    })

    var list10 = new Vue({
        el: '#idd10',
        data: {
            selected: '',
            options: data["11"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(10, this.options[this.selected]);
            },
        }
    })

    var list11 = new Vue({
        el: '#idd11',
        data: {
            selected: '',
            options: data["12"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(11, this.options[this.selected]);
            }
        }

    })

    var list12 = new Vue({
        el: '#idd12',
        data: {
            selected: '',
            options: data["13"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(12, this.options[this.selected]);
            },
        }
    })

    var list13 = new Vue({
        el: '#idd13',
        data: {
            selected: '',
            options: data["14"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(13, this.options[this.selected]);
            }
        }

    })

    var list14 = new Vue({
        el: '#idd14',
        data: {
            selected: '',
            options: data["15"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(14, this.options[this.selected]);
            },
        }
    })

    var list15 = new Vue({
        el: '#idd15',
        data: {
            selected: '',
            options: data["16"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(15, this.options[this.selected]);
            }
        }

    })

    var list16 = new Vue({
        el: '#idd16',
        data: {
            selected: '',
            options: data["17"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(16, this.options[this.selected]);
            },
        }
    })

    var list17 = new Vue({
        el: '#idd17',
        data: {
            selected: '',
            options: data["18"].Options
        },
        methods: {
            onChange: function (event) {
                finalText.updateText(17, this.options[this.selected]);
            },
        }
    })

    

    var finalText = new Vue({
        el: "#finalText",
        data: {
            arr: [],
            text: '',
            show: false
        },
        methods: {
            updateText: function (key, element) {
                this.arr[key] = element["Text"];
                this.text="";
                if (key==0){
                    this.arr[key]=this.arr[key].replace("___",inputName.returnName());
                }
                for (el in this.arr){
                    this.text = this.text + " " + this.arr[el];
                }

            },
            makeTextVisible: function () {

            }
        }
    })




    $(document).ready(function () {
        $('#fullpage').fullpage({
            navigation: true,
        });
    });

</script>
{% endblock %}